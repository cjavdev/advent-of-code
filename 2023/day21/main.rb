puts 'Hello, World!'
input = <<~INPUT
...........
.....###.#.
.###.##..#.
..#.#...#..
....#.#....
.##..S####.
.##..#...#.
.......##..
.##.#.####.
.##..##.##.
...........
INPUT

input = DATA.read
grid = input.split("\n").map { |row| row.chars }

def find_s(grid)
  grid.each_with_index do |row, x|
    row.each_with_index do |cell, y|
      return [x, y] if cell == 'S'
    end
  end
end

DIRS = [
  [-1, 0],
  [0, -1],
  [0, 1],
  [1, 0]
]
require "set"

class Set
  def pop
    popped = first
    delete(first)
    popped
  end
end
steps = 1000
q = Set.new
q << find_s(grid)
next_q = Set.new
step_and_size = {}
steps.times do |step|
  until q.empty?
    current = q.pop
    x, y = current
    DIRS.each do |dx, dy|
      next if x + dx < 0 || x + dx >= grid.size
      next if y + dy < 0 || y + dy >= grid[0].size
      if grid[x + dx][y + dy] == '.'
        next_q << [x + dx, y + dy]
      end
    end
  end
  q = next_q.dup
  next_q = Set.new
  step_and_size[step] = q.size
  p [step, q.size]
end

step_and_size.each do |step, size|
  puts "#{step}: #{size}"
end

# grid.each_with_index do |row, x|
#   row.each_with_index do |cell, y|
#     if q.include?([x, y])
#       print "O"
#     else
#       print cell
#     end
#   end
#   puts
# end
p q.to_set.size + 1

__END__
...................................................................................................................................
.....###.........#..#.........#.............#........##....#................##.......#..#.#.....#......#..#..#..##........#........
.#.............#............#...#.#...#.............#....#.................#.......#................#.....#....#.................#.
..#.......#..........#..........#......#.........#........................#.#...##.........#.......#.....#.##..#.............#.....
....#...#..##......#................##......#..#..#........................##.......#.............#..............##................
........#....#........#..#......#....#......#........#.........................#.....#.#.........#.................#..#..##....#...
.......................#...#.....#.....#..........#..#.........#............##.#...........#.....#..#.##..........#......#.#.....#.
..........#..........#....#.##.#...................#..#...........#...............#...........................#.....#.......##.....
.#.##..........#....#.#...#.....#.............#...............#.....................#.......#.#......#..................#..#.......
......#.#.#...................#..#.............................#...............#....#..............................###...........#.
....#...#...................#..................#...........####....#...............#....#..#.................#................#....
.............#..#.#..##.....#...#.......##.#...............#.........##..........#......................##....##....#.......#...#..
....#....#......###.#......#..#....#..#.........#....................................................#............#.........#.#....
.......#.#........##........#..#............#.##.............#..#...#....................#.#.....##.................#..............
....#....#....##...#..#......#.#.......................##......#.......................#..#.#..........#.#...........#..........#..
.#.......#..#......#......#..#............................##..........................#.............#.......#...##.#...............
...#..#...................#....#....#.....##...........#...............#...#...........#.#.#..#.#.#.#.#..#..#...#.#....#...........
.....................#..#.#..#..#..........#........#.................#.......#.......#.#......#.#..#........#............##.......
.......................................#...#.................###...##.#.....##.........##.........#..............#........#........
........#.##.........#........#.....##.............#...#...............#...................#..#.................#.........#.....#..
..#..#.#........#.....#.................................#............#.#....#.#...............##...#.....#............#..#.........
....#......#.....#....................#.........#.................#......................................................#.#....#..
....##...#...##..........#..............................#..#...#....#.......................#.#.#.....#.......#..#............##...
.#.....#.........#........#...#.....###...........#...............#.#...........#.#..........##..#..#................#..........#..
...#..#.#.#.......................................................#.##...#..........##............#..#.....#.........###...#....#..
......###.......#.#....##......#..#....................#........#.............#.#..........................#....#......###..#....#.
........#..........#......#....#.............#..#.................#..............................#.......#.#................#......
.#........#...........#.........#.....................#.........#........##.#.###......................####..#.#....#............#.
..##........#............#.#.......................#.....#.##.................#..#....#............................................
.............#..##....#.#.#...............#..................#.......##.#.....#...................##...##...#.##.............###...
......#..#....##.............................#.............................#..#....#....##.........#...#................#...#.##.#.
..#...........#........................#...........#....#...............#...............#...................#......................
....#...#.#.#...........#.#................###...............#.....##........#........................#.....##...#.#..........#....
.#..#.............#...#....##........#...#.............#............................#..#..#...........#...............##...........
...#......#..........................#.#.....##........#...#.......#...#...........##......#..............#..#.#...#.....#.#....#..
.#.#..............#................##.....#........#.....##...#....................#......#..#..............................#......
.#....................#.............#....#.............##.......#...........#.#......#...................##...#..............#.....
.....#.#...#.........##................#......#.....#...#....##.....................................................##.............
.............#........#............#.#.....#.........##.................##.....###.........#...............#....#..........#.....#.
..#.#...#....#...#......................##............#...#.#..#.........##.................................#......#........#....#.
..#.....#..................................#.#.....................#..#....#.....###..#.#...#..#.....#.......#..#..................
....#....##.#.....#.......................#.#...#......#.......................#.....#.........#....#...............#.......#......
....#.###.#......#...................#.............#...............##.........##........#......#....#..........#........##....###..
.....###....#...#.......................##.#....#.#...#.#..........#...#.....#......#.........#........#............#.....#...#....
...#.#.....#..#..............................##....#......#....#............#..#.#............#...#................................
...............#........##.#####.#......#.........................#....................#.#.#...##.#.##.#.#..................##.....
..#............................#.............#.#....#..........##.......#.#......#.#.#........#..#.#.##..................#.........
..##..##.#.............#..#.....#..#....#.#.#......#........#.................##.............#......#....#.#...........#......#..#.
..........##.#.........#.....##...................#.#...#...........................#........#...........................####......
.#......#.#.#.......#...............#.##..........#........#.................#..#.#.......#.............#....#.....................
.#.....#..#........#..#.....#...........#.#.....#.#.#...#..#..#.....#..........#.#......#............###.#.#...............#.....#.
..................##...#.......#...............#...........#.......#...............#........................................#......
.##.................#..#........#......##.............#..#.#..#....................#....................##.#.............###.......
.#......#...........#..........#...................#.........#.......##...........##..#......#.#....#.....#........................
.........................#.#.....#..#....#...#......#......................#............#................#.........................
....#....................#...#..#..............#..#...#..#..#...............#.....................#...........#..##...........#....
....#.........#...........#.....................#.#....#...#.................##.......#.#.........#...#............##..............
......................#........#...#...................#...#.###....#....#....#...............#....#...#....#......................
..................##......................##.....#...........#..........##..##.#......##............#.##...........................
.#.....................#.......#.................#..#........#...........#.#....#......#........#...........#......................
...........#.........#....#..#.#.#....#..#.......##.........#.............................#....#..#......#.#...#........#..........
.........#.........#.#....#.#.......................#..#......................#.................#....................#.#.#.........
......................#...#...#.........##.....#..............##......#...###......#...#....#.....##...........##........##........
............##..#.#......#...#.............#..#..#.........#...........#...#..#.........#...#......................................
...........#...........#..#......##..........#........#....#....#........#..................#...#.......##..#..#..#......#.........
.................................................................S.................................................................
..............#...#......#..#.....#................##......#............#........#........#..............#......#...........#......
...........#..#......#..#....#.....#..................#.....#...............#....#.....#..........#............#.#......#..#.......
..............#........#.#....#...#............#....#......#..........................................#.............#....#.........
..................#...#...............#.#...#..........#......................#.#.#.#.......#.....#..#........###..................
...................#.........##.#.#.....#..........#...........#.........#.#..#..##......#........#................................
.#.................#.....#.....#.##........#..........#...........#....#.....#...#.....#.........#..#........#.......#.#...........
..................#........#......##.#....##...#.#....#..#.....#....#...................#.....#...##...#.#......................#..
...##..............#..................#......................#.........##...#....#..#....#...........#.#..#........#...........#...
..#..#.............#................#............#............#.......#..#...##.....#.......#.......#.....#..................#.#...
..#.............#...................................#.............#......................................#..........#..............
.....#................#......#..#............#......#..#.##.#......#.......#.....#..#.........................##...........#...#.#.
...#.#............#......##........#.............#.....#..............#......###......#................#..................#......#.
....#...#.........#..#.##...###.#..............#........#..............#.#.........##....#.#.#......#....#.................#...#...
.##...#..#..........##............#........###.....#............#..#.........#............#.#.#........#..#..###............#......
.......#.................#.......#...#.......#..#......#..............#......#..##.................##....#.......................#.
...........................#.....#........#..#..............#.....##..........#....#..............#..#......##.............#.......
......#.................#................#...#.......................#.#.......##..#.........#....#.....##.............#.#.....#...
........................#.#.#.....##.......##.#........##.....#.....#...#....................#..........#..........................
.#...#........#............#.....#...#.....................#...........#.............#.##.#.....#......#.#...................#...#.
.....#..........#...........#...........................#.#.........#.............#..#.#..#...#.#....#..##..........#...........#..
.....#....#..#..................#....#...#......................#.......#..................#.......................#....#....#..#..
...#..............#...........#.#...........#.........#....#.........#.##.#..#......##.........#...##............##..#.#..#.....#..
..#............................#...#.....#......#.........#...#.....................#.....#.....#..#..#.............#..#...........
......#....#.....#.....................#.#.......#.#.#.....##.......#...#.............#..#.......#.............#..........#.#......
...............##..#................#.........#...##......#..#......#.#..#..........###..#..#..##............#..........#...#....#.
.#....#...........#..#.........#.#.#....#....#.........#.#............#....#...............##..................#.....#......#......
........#...#.....#.#................#...#....#..#....#.#..#.........#...#.................#..#.........................#..........
.........##...........................................#.................#...#.....#..#...##......#.........##............#...#.....
..#..#..#...#.#..................#....#.................#.#...#.........#.......#......##..#....#.........#......#....#............
...#...#......#....##...................##....#......#......#......#.......#.................#..#.............#.#..................
.#...#...#..##......#.#................#.#.................##..##.#..#...#.........#.........#..........................#..##......
.....................#..#..............#.......#..#...##.....................##...#....#.......................#..........#........
.......#.........#.#.....##..........#..#......#......#..#......#...#..................#....#......................................
.....#...#.....#........##......................##..................#..#...#.........###.#..#............................#.#....#..
........#....#...........#..#..........#.#.........................................#..#....#.......#...#...#...............###.....
....##..............#..#.................#..........#...........#.....#.....#....#....#.##....................#......#..#..........
..#..#..##..........##....#.#....................#.....#.#.....#............#.#........#............#....................#......#..
..........#..##......##........#....................#..#.#.............#......#........#.........#.....#....##..............##..#..
.#.......#...........#.......#.............#......###.....##.#....#....#..#....#...............................#.#..#...#.#....#...
............#....##...........#.............#.......................#......#.#...#...............##...#.....#...................#..
..#........#.........#....#..........................#....................###................#....................#.#..............
.....#..#.#........#............#.#..##.......#.....#..#...........#.........................#.......#.....#.......#........#...#..
.....##........................#..#.............#..............##.....#.....#.....#........#................#....#..##.#.........#.
..#...#........#.#...........#...#..............#.#.....#.....#.......................................#..#.#..................#....
...........#.#.....#..........#.#.......#.................#.......#.#...........#.............##........#.............#...#..#.#...
....#.....#....##.#........##..#..#.#........................#.........#.......#.........#.....###.....#.#.........................
.......#.....#.........#....#..#....#.....#..........#.#.#.........#.....#....#.........#.................#..........#...#.........
.#......#.........#..#...#......#.............................#...........#...............#.......#...#..........#...#......###....
.....................#..............#.#......#...........#......#....#.#...##.............#...##.#..#.###.#..............#.........
.#...#.............#.....#.....##..#........#............#..##....###....#.................#..#.#...##.#...#..........#...#.#......
.........#..#.....#..........................#.#..........##..#...##......................#...................#.....#............#.
.....#...##............#.........##...###......#...................#..................................#...........##..#............
.......#......................#....#...#..................#........#.#...#...........#.................#........#..........#.#.....
............#..............#.#.#..........#...#............#.......#............#.#.....#..##....#...#.#.....##........#...........
...........##.#..#...........#...#.....#.....#.............#......................#...........#...#.#.....#.......#..#..#..........
...#.#......#..#..#...............................#.............#.#..................#....#.#....#..............#................#.
.....#..................#...##.....#.#..#.#.#...................#..........................#.................#....#.....#..........
.............#..#..#....#.#..#..##...............#...............................#....#........#..#..#.......##.#........#.........
....#....#................##..#.........#.#..#....................#..............#...#......#...#..#...............................
......#....##.........##..............#....#....#.#..#..#....................................#...........#.#.#.#.###......#........
.#.#.....#.#..#.....#.....#.......##...#.......................................##......................#..........#.#....#..##..#..
............#..#.#........#..........#....#..#.....#.....#................#....##...........#...##....##.##....##.....##.#.........
...#....#...##..#.#.........#............#.........#.......................##..#.............................##....#..#.........#..
.......#.#............#...#...##....##.#..##..............#............#..............#....#.....#...#....##....#....#........#....
...................................................................................................................................
